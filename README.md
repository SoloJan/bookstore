![](https://github.com/SoloJan/bookstore/workflows/tests/badge.svg)

# bookstore
This is an example project to demonstrate the tech stack I use and like

# general project setup
This is a spring boot project, using maven as a build tool. My project is structured by type it has different packages for different types of components, so one package for the service layer, one for the model layer and one for the rest api layer. The alternative is to structure a project by domain types so putting everything which belongs to books in one folder and everything which has to do with bookstores in an other. The later approach is much more domain driven and focussed on functionality and thats why I like that more as an concept. But structuring the project by domain makes is harder to maintain, very often the domain logic changes and very ofteren there are links between the different domain objects which often creates spagethi code so thats why I use the more technical focus. I'll go in to more detail in the different parts of my structure

## The model layer
The model defines the core of the project. It defines the objects and relations between the objects in this world. And it contains logic to make sure the model stays consistent. For example in this project a bookstore can have different books in stock and it keeps track of the stock count, the model logic makes sure that it can never have a negative amount of books in store. I use JPA and Hibernate as an orm which maps the model to a database model, however this is not the core purpose of the model the model also works perfectly on its own without a database as you can see in the unit test. 

## The service layer
The service layer defines different ways in which you can interact with the software. In this project it mainly interacts with the model but the service layer could also do different tasks like sending emails, or interacting with an external rest interface. I like to have as many services as possibles all with a dedicated task. A service can and should use other service. The services I have here get and store data in a database using a repository I general considder it a code smell if a service has multiple repositories, dealing with a different repository should in general go to a dedicated service. I also do most of my exception handling and logging in the service layer. The service also contains all the logic for interacting with the model for example wheter a user buys a book, or a shopkeeper throwing away a book is the same for the model because the book leaves the store, but its not the same for the user, the customer expects an exception when the book isn't there but that does not matter for the shopkeeper who is not intrested in the actual book but just wants it gone.  

## The api layer
The api layer defines how external users can interact with the software. It should therefore be stable and well documented. The api layer should only contain logic which has to do with translating the code to a rest interface. In general you should be able to add a soap interface to the project without reusing anything from the api layer and without touchign anything in the service layer. The component methods should al have one or two lines of code and not more, the only thing they need to do is call a dedicated service map the output and return it. The dto's are the model which is represented to the outside world, having seperate entities for this instead of the core model makes it possible to change the core model without changing the interface to the outside world it also makes sure that internal properties like the database id's are not mapped to the outside world. The api layer might seems very simple but a lot of more complex things are done by spring, changing an annotation or spring property 
can change the behavior dramaticly. Using the right properties and annotations is therefore part of the program logic and should be tested as well. 
